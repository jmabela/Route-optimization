{% extends 'base.html' %}
{% block title %}ADVENTURE AWAITS... LET'S PLAN A NEW TRIP TOGETHER{% endblock %}

{% block body %}



<h2>Create a Trip</h2>
  <form action="/createtrip" method="POST">
    <p>
        Trip title: <input type="text" name="title">
      </p>
      <p>
        Month: <select name="month">
            <option value="jan">January</option>
            <option value="feb">February</option>
            <option value="march">March</option>
            <option value="apr">April</option>
            <option value="may">May</option>
            <option value="june">June</option>
            <option value="jul">July</option>
            <option value="aug">August</option>
            <option value="sept">September</option>
            <option value="oct">October</option>
            <option value="nov">November</option>
            <option value="dec">December</option>
          </select>
        
      </p>
    <p>
      Year: <select name="year">
        <option value="2023">2023</option>
        <option value="2024">2024</option>
        <option value="2025">2025</option>
        <option value="2026">2026</option>
        <option value="2027">2027</option>
        <option value="2028">2028</option>
        <option value="2029">2029</option>
        <option value="2030">2030</option>
      </select>
    </p>
   

            City: 
            <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDKuYMmcVA4ZGQZ7fvOMkHpRWG3kCKeqNk&libraries=places"></script>
            <script>

                function initialize() {
                  var input = document.getElementById('searchTextField');
                  var autocomplete = new google.maps.places.Autocomplete(input);
                    google.maps.event.addListener(autocomplete, 'place_changed', function () {
                        var place = autocomplete.getPlace();
                        document.getElementById('placeId').value= place.place_id;
                        document.getElementById('cityName').value = place.name;
                        document.getElementById('cityLat').value = place.geometry.location.lat();
                        document.getElementById('cityLng').value = place.geometry.location.lng();

                        var form_addres = place.formatted_address
                        var l = form_addres.split(","); //getting formated_address into an Array to get Country name
                        var country = l[l.length - 1] //accesing to last item of array, as it's always the country name
                        
                        
                        document.getElementById('country').value = country;
                        
                        
                    });
                }
                google.maps.event.addDomListener(window, 'load', initialize);
                
            </script>
       
       
        <body>
            <input id="searchTextField" type="text" size="50" placeholder="Enter a city" autocomplete="on" runat="server" />  
            
            <input type="text" id="cityName" name="cityName" />
            <input type="text" id="country" name="country" />
            <input type="text" id="placeId" name="placeId" />
            <input type="text" id="cityLat" name="cityLat" />
            <input type="text" id="cityLng" name="cityLng" />
        </body>
        </html>


        <div id="Citytablediv">
            <br>
            <input type="button" id="addCitybutton" value="Add City" onclick="addRow('dataTable')" /><br/><br/>
            

            <table id="dataTable" width="350px" border="0">
            <thead>
                <tr>
                    <th></th>
                    <th>City</th>
                    <th>Country</th>
                    <th>placeId</th>
                    <th>Latitude</th>
                    <th>Longitude</th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="dataTableBody">
                <tr>
                <td><input type="hidden" name="chk"/></td>
                <td><input type="hidden" id="city" readonly=true/></td>
                <td><input type="hidden" id="country" readonly=true/></td>
                <td><input type="hidden" id="placeId" readonly=true/></td>
                <td><input type="hidden" id="latbox" readonly=true/></td>
                <td><input type="hidden" id="lngbox" readonly=true/></td>
                <td> <input type="hidden"  /> </td>
                </tr>

            </tbody>
            
            </table>
            <br>
            <br>
            It's okay to change your mind... select cities you no longer want to visit and press delete button!
            <br>
            <input type="button" id="deleteCity" value="Delete City" onclick="deleteRow('dataTable')"/>
            <br>
            <br>
            <input type="button" id="addCities" value="Done with Cities"/>
        

            
        </div>

    <br>
    <br>
    <br>
      
    <p>
      <input type="submit" id="createTrip" value="Create Trip">
    </p>
  </form>
  <script language="JavaScript" src="/static/cities.js" type="text/javascript"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>

  

{% endblock %}